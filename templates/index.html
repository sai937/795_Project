<!DOCTYPE html>
<html>
<head>
	<title>WebGazer Example</title>
	<script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
</head>
<body>
	<!-- <h1>WebGazer Example</h1>
	<p>This is an example of how to use WebGazer.js to track eye movements.</p> -->
	<video id="webgazerVideoFeed" autoplay muted></video>
	<canvas id="webgazerCanvas"></canvas>

	<!-- Use Flask to display the resume file -->
	<iframe src="{{ url_for('static', filename='resume.pdf') }}" width="100%" height="500px"></iframe>

	<script>
		// Initialize WebGazer.js
		webgazer.setGazeListener(function(data, elapsedTime) {
			if (data == null) {
				return;
			}
			var xhr = new XMLHttpRequest();
			xhr.open('POST', '/save');
			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xhr.send('data=' + JSON.stringify(data));
		}).begin();

		// Set up video element
		var video = document.getElementById("webgazerVideoFeed");
		webgazer.setVideoViewer(video);

		// Set up canvas element
		var canvas = document.getElementById("webgazerCanvas");
		webgazer.setGazeCanvas(canvas);
	</script>
</body>
</html>
